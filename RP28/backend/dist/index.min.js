"use strict";var express=require("express"),mongoose=require("mongoose"),cors=require("cors"),EmployeeModel=require("./models/User"),ElistModel=require("./models/EmployeeList"),app=express();app.use(express.json()),app.use(cors()),mongoose.connect("mongodb://127.0.0.1:27017/User").then(function(){return console.log("mongodb connected")}),app.post("/login",function(e,n){var o=e.body,r=o.email,s=o.password;EmployeeModel.findOne({email:r}).then(function(e){console.log(e),e?e.password===s?n.json("Success"):n.json("The password is incorrect"):n.json("No record existed")})}),app.post("/register",function(e,n){EmployeeModel.create(e.body).then(function(e){return n.json(e)}).catch(function(e){return n.json(e)})}),app.post("/employeelist",function(n,o){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.body.title,e.next=3,regeneratorRuntime.awrap(ElistModel.findOne(r));case 3:e.sent?o.send("already exists"):ElistModel.create(n.body).then(function(e){return o.status(201).json(e)}).catch(function(e){return o.status(500).json(e)});case 5:case"end":return e.stop()}})}),app.get("/employeelist",function(e,n){var o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(ElistModel.find({}));case 3:o=e.sent,console.log(o),n.send(o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Err fetching",e.t0);case 11:case"end":return e.stop()}},null,null,[[0,8]])}),app.listen(3001,function(){console.log("server is running")});
//# sourceMappingURL=index.min.js.map
